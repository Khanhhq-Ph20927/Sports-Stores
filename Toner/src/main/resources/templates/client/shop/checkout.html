<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" data-bs-theme="light" data-footer="dark">
<head th:replace="client/fragments/head::head"></head>
<body>
<div th:replace="client/fragments/header::header"></div>
<!--cart -->
<div th:replace="client/fragments/cart::cart"></div>
<!-- Modal -->
<div class="modal fade" id="searchModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content rounded">
            <div class="modal-header p-3">
                <div class="position-relative w-100">
                    <input type="text" class="form-control form-control-lg border-2" placeholder="Search for Toner..."
                           autocomplete="off" id="search-options" value="">
                    <span class="bi bi-search search-widget-icon fs-17"></span>
                    <a href="javascript:void(0);"
                       class="search-widget-icon fs-14 link-secondary text-decoration-underline search-widget-icon-close d-none"
                       id="search-close-options">Clear</a>
                </div>
            </div>
            <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end p-0 overflow-hidden" id="search-dropdown">

                <div class="dropdown-head rounded-top">
                    <div class="p-3">
                        <div class="row align-items-center">
                            <div class="col">
                                <h6 class="m-0 fs-14 text-muted fw-semibold"> RECENT SEARCHES </h6>
                            </div>
                        </div>
                    </div>

                    <div class="dropdown-item bg-transparent text-wrap">
                        <a href="index.html" class="btn btn-soft-secondary btn-sm btn-rounded">how to setup <i
                                class="mdi mdi-magnify ms-1 align-middle"></i></a>
                        <a href="index.html" class="btn btn-soft-secondary btn-sm btn-rounded">buttons <i
                                class="mdi mdi-magnify ms-1 align-middle"></i></a>
                    </div>
                </div>

                <div data-simplebar style="max-height: 300px;" class="pe-2 ps-3 my-3">
                    <div class="list-group list-group-flush border-dashed">
                        <div class="notification-group-list">
                            <h5 class="text-overflow text-muted fs-13 mb-2 mt-3 text-uppercase notification-title">Apps
                                Pages</h5>
                            <a href="javascript:void(0);" class="list-group-item dropdown-item notify-item"><i
                                    class="bi bi-speedometer2 me-2"></i> <span>Analytics Dashboard</span></a>
                            <a href="javascript:void(0);" class="list-group-item dropdown-item notify-item"><i
                                    class="bi bi-filetype-psd me-2"></i> <span>Toner.psd</span></a>
                            <a href="javascript:void(0);" class="list-group-item dropdown-item notify-item"><i
                                    class="bi bi-ticket-detailed me-2"></i> <span>Support Tickets</span></a>
                            <a href="javascript:void(0);" class="list-group-item dropdown-item notify-item"><i
                                    class="bi bi-file-earmark-zip me-2"></i> <span>Toner.zip</span></a>
                        </div>

                        <div class="notification-group-list">
                            <h5 class="text-overflow text-muted fs-13 mb-2 mt-3 text-uppercase notification-title">
                                Links</h5>
                            <a href="javascript:void(0);" class="list-group-item dropdown-item notify-item"><i
                                    class="bi bi-link-45deg me-2 align-middle"></i> <span>www.themesbrand.com</span></a>
                        </div>

                        <div class="notification-group-list">
                            <h5 class="text-overflow text-muted fs-13 mb-2 mt-3 text-uppercase notification-title">
                                People</h5>
                            <a href="javascript:void(0);" class="list-group-item dropdown-item notify-item">
                                <div class="d-flex align-items-center">
                                    <img src="../assets/images/users/avatar-1.jpg" alt=""
                                         class="avatar-xs rounded-circle flex-shrink-0 me-2">
                                    <div>
                                        <h6 class="mb-0">Ayaan Bowen</h6>
                                        <span class="fs-12 text-muted">React Developer</span>
                                    </div>
                                </div>
                            </a>
                            <a href="javascript:void(0);" class="list-group-item dropdown-item notify-item">
                                <div class="d-flex align-items-center">
                                    <img src="../assets/images/users/avatar-7.jpg" alt=""
                                         class="avatar-xs rounded-circle flex-shrink-0 me-2">
                                    <div>
                                        <h6 class="mb-0">Alexander Kristi</h6>
                                        <span class="fs-12 text-muted">React Developer</span>
                                    </div>
                                </div>
                            </a>
                            <a href="javascript:void(0);" class="list-group-item dropdown-item notify-item">
                                <div class="d-flex align-items-center">
                                    <img src="../assets/images/users/avatar-5.jpg" alt=""
                                         class="avatar-xs rounded-circle flex-shrink-0 me-2">
                                    <div>
                                        <h6 class="mb-0">Alan Carla</h6>
                                        <span class="fs-12 text-muted">React Developer</span>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- removeItemModal -->
<div id="removeItemModal" class="modal fade zoomIn" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mt-2 text-center">
                    <lord-icon src="https://cdn.lordicon.com/gsqxdxog.json" trigger="loop"
                               colors="primary:#f7b84b,secondary:#f06548" style="width:100px;height:100px"></lord-icon>
                    <div class="mt-4 pt-2 fs-15 mx-4 mx-sm-5">
                        <h4>Are you sure ?</h4>
                        <p class="text-muted mx-4 mb-0">Are you sure you want to remove this product ?</p>
                    </div>
                </div>
                <div class="d-flex gap-2 justify-content-center mt-4 mb-2">
                    <button type="button" class="btn w-sm btn-light" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn w-sm btn-danger" id="remove-product">Yes, Delete It!</button>
                </div>
            </div>

        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" id="subscribeModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content border-0">
            <div class="modal-body p-0 bg-info-subtle rounded">
                <div class="row g-0 align-items-center">
                    <div class="col-lg-6">
                        <div class="p-4 h-100">
                            <span class="badge bg-info-subtle text-info  fs-13">GET 10% SALE OFF</span>
                            <h2 class="display-6 mt-2 mb-3">Subscribe & Get <b>50% Special</b> Discount On Email</h2>
                            <p class="mb-4 pb-lg-2 fs-16">Join our newsletter to receive the latest updates and
                                promotion</p>
                            <form action="#!">
                                <div class="position-relative ecommerce-subscript">
                                    <input type="email" class="form-control rounded-pill border-0"
                                           placeholder="Enter your email">
                                    <button type="submit" class="btn btn-info btn-hover rounded-pill">Subscript</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="p-4 pb-0">
                            <img src="../assets/images/subscribe.png" alt="" class="img-fluid">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- end modal -->
<div th:replace="client/fragments/chat::chat"></div>
<section class="page-wrapper bg-primary">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="text-center d-flex align-items-center justify-content-between">
                    <h4 class="text-white mb-0">Checkout</h4>
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb breadcrumb-light justify-content-center mb-0 fs-15">
                            <li class="breadcrumb-item"><a href="#!">Shop</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Checkout</li>
                        </ol>
                    </nav>
                </div>
            </div>
            <!--end col-->
        </div>
        <!--end row-->
    </div>
    <!--end container-->
</section>

<section class="section">
    <div class="container">
        <div class="row">
            <div class="col-xl-8">
                <div class="card">
                    <div class="card-body">
                        <div class="table-responsive table-card">
                            <table class="table align-middle table-borderless table-nowrap text-center mb-0">
                                <thead>
                                <tr>
                                    <th scope="col">Sản Phẩm</th>
                                    <th scope="col">Đơn Giá</th>
                                    <th scope="col">Số Lượng</th>
                                    <th scope="col">Thành Tiền</th>
                                </tr>
                                </thead>
                                <tbody id="table-cart">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="mt-4 pt-2">
                    <div class="d-flex align-items-center mb-4">
                        <div class="flex-grow-1">
                            <h5 class="mb-0">Shipping Address</h5>
                        </div>
                        <div class="flex-shrink-0">
                            <a href="address.html" class="badge bg-secondary-subtle text-secondary  link-secondary">
                                Add Address
                            </a>
                        </div>
                    </div>
                    <div class="row gy-3" id="address">

                    </div>
                </div>
            </div>
            <!-- end col -->
            <div class="col-lg-4">
                <div class="sticky-side-div">
                    <div class="card">
                        <div class="card-body">
                            <div class="text-center">
                                <h6 class="mb-3 fs-14">Have a <span class="fw-semibold">promo</span> code ?</h6>
                            </div>
                            <div class="hstack gap-3 px-3 mx-n3">
                                <input class="form-control me-auto" type="text" placeholder="Enter coupon code"
                                       value="Toner15" aria-label="Add Promo Code here..." disabled>
                                <button type="button" class="btn btn-success w-xs" disabled>Apply</button>
                            </div>
                        </div>
                    </div>
                    <div class="card overflow-hidden">
                        <div class="card-header border-bottom-dashed">
                            <h5 class="card-title mb-0 fs-15">Order Summary</h5>
                        </div>
                        <div class="card-body pt-4">
                            <div class="table-responsive table-card">
                                <table class="table table-borderless mb-0 fs-15">
                                    <tbody>
                                    <tr>
                                        <td>Tổng tiền(trước thuế)</td>
                                        <td class="text-end cart-subtotal" id="sub-total"></td>
                                    </tr>
                                    <tr>
                                        <td>Mã giảm giá <span class="text-muted" disabled="">(Toner15)</span>:</td>
                                        <td class="text-end cart-discount">- 0%</td>
                                    </tr>
                                    <tr>
                                        <td>Phí giao hàng</td>
                                        <td class="text-end cart-shipping">0 VND</td>
                                    </tr>
                                    <tr>
                                        <td>VAT(10%) :</td>
                                        <td class="text-end cart-tax" id="vat"></td>
                                    </tr>
                                    <tr class="table-active">
                                        <th>Tổng thanh toán (VND) :</th>
                                        <td class="text-end">
                                            <span class="fw-semibold cart-total" id="total_amount"></span>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                            <!-- end table-responsive -->
                        </div>
                    </div>
                    <div class="hstack gap-2 justify-content-between justify-content-end">
                        <a class="btn btn-hover btn-soft-info w-100" onclick="handleBack()">Quay Lại Giỏ Hàng<i
                                class="ri-arrow-right-line label-icon align-middle ms-1"></i></a>
                        <a class="btn btn-hover btn-primary w-100">Đặt Hàng</a>
                    </div>

                </div>
                <!-- end sticky -->
            </div><!--end col-->
        </div><!--end row-->
    </div><!--end container-->
</section>

<section class="section bg-light bg-opacity-25"
         style="background-image: url('../assets/images/ecommerce/bg-effect.png');background-position: center; background-size: cover;">
    <div class="container">
        <div class="row align-items-center justify-content-between">
            <div class="col-lg-6">
                <div>
                    <p class="fs-15 text-uppercase fw-medium"><span class="fw-semibold text-danger">25% Up to</span> off
                        all Products</p>
                    <h1 class="lh-base text-capitalize mb-3">Stay home & get your daily needs from our shop</h1>
                    <p class="fs-15 mb-4 pb-2">Start You'r Daily Shopping with <a href="#!" class="link-info fw-medium">Toner</a>
                    </p>
                    <form action="#!">
                        <div class="position-relative ecommerce-subscript">
                            <input type="email" class="form-control rounded-pill" placeholder="Enter your email">
                            <button type="submit" class="btn btn-primary btn-hover rounded-pill">Subscript Now</button>
                        </div>
                    </form>
                </div>
            </div>
            <!--end col-->
            <div class="col-lg-4">
                <div class="mt-4 mt-lg-0">
                    <img src="../assets/images/ecommerce/subscribe.png" alt="" class="img-fluid">
                </div>
            </div>
            <!--end col-->
        </div>
        <!--end row-->
    </div>
    <!--end container-->
</section>
<div class="modal" id="myModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Địa Chỉ Nhận Hàng</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal"
                        aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row gy-3">
                    <div class="col-lg-6 col-12">
                        <div class="form-check card-radio">
                            <input name="shippingAddress" type="radio"
                                   class="form-check-input" checked="" disabled>
                            <label class="form-check-label">
                                <span class="mb-3 text-uppercase fw-semibold d-block">Địa Chỉ Nhận Hàng</span>
                                <span class="fs-14 mb-2 d-block fw-semibold" id="address-province-city"></span>
                                <span class="text-muted fw-normal text-wrap mb-1 d-block" id="address-detail"></span>
                                <span class="text-muted fw-normal d-block" id="phone-number"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    Đóng
                </button>
                <button type="button" class="btn btn-primary">
                    Lưu
                </button>
            </div>
        </div>
    </div>
</div>
</div>
<div class="modal" id="myModalCreate" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Địa Chỉ Nhận Hàng</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal"
                        aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="row">
                            <div class="col-lg-3">
                                <div class="mb-3">
                                    <label class="form-label">Tỉnh Thành</label>
                                    <select class="form-control" name="tinh" id="province"
                                            onchange="getDistricts()">
                                        <option value="0" data-id="">Chọn</option>
                                    </select>
                                    <div class="text-danger"
                                    >
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3">
                                <div class="mb-3">
                                    <label class="form-label" for="address-detail-input">Địa Chỉ
                                    </label>
                                    <input type="text" class="form-control" name="diaChiCT"
                                           id="address-detail-input"
                                           placeholder="địa chỉ cụ thể ..."
                                           onkeyup="getAddressDetail()"
                                    >
                                    <div class="text-danger">
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="row">
                                    <div class="col-lg-6">
                                        Tỉnh Thành :
                                    </div>
                                    <span class="text-muted fw-normal text-wrap mb-1 d-block col-lg-6" id="address-create-1"></span>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6"> Quận Huyện : </div>
                                    <span class="text-muted fw-normal text-wrap mb-1 d-block col-lg-6"
                                          id="address-create-2"></span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3">
                                <div class="mb-3">
                                    <label class="form-label">Quận/Huyện</label>
                                    <select class="form-control" name="quan" id="district"
                                            onchange="getWards()">
                                        <option value="0" data-id="">Chọn quận/huyện</option>
                                    </select>
                                    <div class="text-danger">
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3">
                                <div class="mb-3">
                                    <label class="form-label">Xã/Phường</label>
                                    <select class="form-control" name="xa" id="ward" onchange="findInputWard()">
                                        <option value="0" data-id="">Chọn Xã/Phường</option>
                                    </select>
                                    <div class="text-danger">
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="row">
                                    <div class="col-lg-6">Xã Phường : </div>
                                    <span class="text-muted fw-normal text-wrap mb-1 d-block col-lg-6"
                                          id="address-create-3"></span>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6">Địa Chỉ Cụ Thể : </div>
                                    <span class="text-muted fw-normal text-wrap mb-1 d-block col-lg-6"
                                          id="address-create-4"></span>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6">Số Điện Thoại : </div>
                                    <span class="text-muted fw-normal d-block"
                                          id="phone-number-address col-lg-6"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    Đóng
                </button>
                <button type="button" class="btn btn-primary">
                    Lưu
                </button>
            </div>
        </div>
    </div>
</div>
</div>

<div th:replace="client/fragments/footer::footer"></div>
<div th:replace="client/fragments/script::script"></div>
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.30.1/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.23.0/axios.min.js"></script>
<script>

    var listCart = [];
    var userId = localStorage.getItem('userId');
    window.onload = function () {
        handleStatusLogin()
        loadCart();
        loadAdress();
    }

    function formatMoney(money) {
        const VND = new Intl.NumberFormat('vi-VN', {
            style: 'currency',
            currency: 'VND',
        });
        return VND.format(money);
    }

    async function loadCart() {
        listCart = JSON.parse(sessionStorage.getItem("listCart"));
        console.log(listCart);
        let sub_total = 0;
        let vat = 0;
        let main = ``;
        for (i = 0; i < listCart.length; i++) {
            let money = formatMoney(listCart[i].spct.sp.donGia * listCart[i].soLuong);
            sub_total += listCart[i].spct.sp.donGia * listCart[i].soLuong;
            vat += (listCart[i].spct.sp.donGia * listCart[i].soLuong) * 0.1;
            let urlGetPicture = '/api/client/product_detail/picture-detail/' + listCart[i].spct.sp.id + '/' + listCart[i].spct.ms.id;
            const pictureResponse = await fetch(urlGetPicture, {
                method: 'GET'
            });
            let dataPicture = await pictureResponse.json();
            let img = '';
            if (dataPicture.statusText === "failure") {
                img = `<img src="../assets/images/products/img-8.png" alt="" class="avatar-xs">`;
            } else {
                img = `<img src="${dataPicture[0].linkAnh}" alt="" class="avatar-xs">`;
            }
            main += `
                    <tr>
                            <td class="text-start">
                                 <div class="d-flex align-items-center gap-2">
                                      <div class="avatar-sm flex-shrink-0">
                                              <div class="avatar-title bg-success-subtle rounded-3">
                                                    ${img}
                                              </div>
                                      </div>
                                      <div class="flex-grow-1">
                                                  <h6>${listCart[i].spct.sp.tenSP}</h6>
                                                  <p class="text-muted mb-0">${listCart[i].spct.ms.ten} & ${listCart[i].spct.size}</p>
                                      </div>
                                 </div>
                            </td>
                            <td>
                                 ${formatMoney(listCart[i].spct.sp.donGia)}
                            </td>
                            <td>
                                 ${listCart[i].soLuong}
                            </td>
                            <td class="text-end">${money}</td>
                    </tr>
            `;
        }
        let total_amount = sub_total + vat;
        console.log(total_amount);
        document.getElementById("table-cart").innerHTML = main;
        document.getElementById("sub-total").innerText = formatMoney(sub_total);
        document.getElementById("vat").innerText = formatMoney(vat);
        document.getElementById("total_amount").innerText = formatMoney(total_amount);
    }

    async function loadAdress() {
        let url = '/api/client/address/get-by-customer/' + userId;

        const response = await fetch(url, {
            method: 'GET'
        })

        const data = await response.json();

        let address = '';

        if (data.length === 0) {
            address = `<div class="label">Khách Hàng Chưa Có Địa Chỉ!</div>`;
            document.getElementById("address").innerHTML = address;
        } else {
            address = '';
            for (let i = 0; i < data.length; i++) {
                address += `
                        <div class="col-lg-6 col-12">
                            <div class="form-check card-radio">
                                <input id="shippingAddress01" name="shippingAddress" type="radio"
                                       class="form-check-input" checked="">
                                <label class="form-check-label" for="shippingAddress01">
                                    <span class="mb-3 text-uppercase fw-semibold d-block">Địa chỉ nhận hàng</span>
                                    <span class="fs-14 mb-2 d-block fw-semibold">${data[i].ttp}</span>
                                    <span class="text-muted fw-normal text-wrap mb-1 d-block">${data[i].qh + ', ' + data[i].xp + ', ' + data[i].diaChiCuThe + '.'}</span>
                                    <span class="text-muted fw-normal d-block">${data[i].kh.sdt}</span>
                                </label>
                            </div>
                            <div class="d-flex flex-wrap p-2 py-1 bg-light rounded-bottom border mt-n1">
                                <div>
                                    <a class="d-block text-body p-1 px-2" onclick="editAdress(${i})"><i
                                            class="ri-pencil-fill text-muted align-bottom me-1"></i> Edit</a>
                                </div>
                                <div disabled>
                                    <a class="d-block text-body p-1 px-2"
                                       data-bs-toggle="modal"><i
                                            class="ri-delete-bin-fill text-muted align-bottom me-1"></i>Remove</a>
                                </div>
                            </div>
                        </div>
            `;
            }
            address += `
                <div class="col-lg-6 col-12" onclick="createAddress()">
                        <div class="d-lg-flex justify-content-center align-items-center">
                        <span style="padding-right: 10px;">Thêm Đia Chỉ</span>
                        <i class="ri-add-fill"></i>
                    </div>
                </div>
            `;
            document.getElementById("address").innerHTML = address;
        }
    }

    async function editAdress(index) {
        let url = '/api/client/address/get-by-customer/' + userId;

        const response = await fetch(url, {
            method: 'GET'
        })

        const data = await response.json();

        document.getElementById('address-province-city').innerText = data[index].ttp;
        document.getElementById('address-detail').innerText = data[index].qh + ', ' + data[index].xp + ', ' + data[index].diaChiCuThe + '.';
        document.getElementById('phone-number').innerText = data[index].kh.sdt;

        $('#myModal').modal('show');
    }

    function createAddress() {
        $('#myModalCreate').modal('show');
    }

    function handleBack() {
        sessionStorage.removeItem("listCart");
        window.location.href = '/shop-cart';
    }

    const host = "https://online-gateway.ghn.vn/shiip/public-api/master-data/province";
    const districtHost = "https://online-gateway.ghn.vn/shiip/public-api/master-data/district";
    const wardHost = "https://online-gateway.ghn.vn/shiip/public-api/master-data/ward";
    const token = "92b43f7d-dee6-11ee-a2c1-ca2feb4b63fa";


    $(document).ready(function () {
        const provinceDropdown = $("#province");

        axios.get(host, {
            headers: {
                'Content-Type': 'application/json',
                'token': token,
            }
        })
            .then(response => {
                const provinces = response.data.data;

                provinces.forEach(province => {
                    provinceDropdown.append(`<option value="${province.ProvinceName}" data-id="${province.ProvinceID}">${province.ProvinceName}</option>`);
                });

            })
            .catch(error => {
                console.error('Error fetching GHN Provinces:', error);
            });
    });

    function findInputWard() {
        var selectedOption = document.getElementById("ward").value;
        if (selectedOption === "0") {
            document.getElementById("address-create-3").innerText = '';
        } else {
            var selectedOptionId = document.getElementById("ward").selectedOptions[0].getAttribute("data-id");

            document.getElementById("address-create-3").innerText = selectedOption;
        }
    }

    function getAddressDetail() {
        var inputValue = document.getElementById("address-detail-input").value;

        document.getElementById("address-create-4").innerText = inputValue;
    }

    function getDistricts() {
        const selectedProvince = $("#province option:selected");
        const selectedProvinceId = selectedProvince.data("id");
        const selectedProvinceName = selectedProvince.val();
        const districtDropdown = $("#district");
        const wardDropdown = $("#ward");

        districtDropdown.empty();
        districtDropdown.append(`<option value="" data-id="">Chọn quận</option>`);

        wardDropdown.empty();
        wardDropdown.append(`<option value="" data-id="">Chọn phường/xã</option>`);


        if (!selectedProvinceId) {
            return;
        }

        axios.get(`${districtHost}?province_id=${selectedProvinceId}`, {
            headers: {
                'Content-Type': 'application/json',
                'token': token,
            }
        })
            .then(response => {
                const districts = response.data.data;

                districts.forEach(district => {
                    districtDropdown.append(`<option value="${district.DistrictName}" data-id="${district.DistrictID}">${district.DistrictName}</option>`);
                });
            })
            .catch(error => {
                console.error('Error fetching GHN Districts:', error);
            });
        var selectedOption = document.getElementById("province").value;
        if (selectedOption === "0") {
            document.getElementById("address-create-1").innerText = '';
        } else {
            var selectedOptionId = document.getElementById("province").selectedOptions[0].getAttribute("data-id");

            document.getElementById("address-create-1").innerText = selectedOption;
        }

    }


    function getWards() {
        const selectedDistrict = $("#district option:selected");
        const selectedDistrictId = selectedDistrict.data("id");
        const selectedDistrictName = selectedDistrict.val();
        const wardDropdown = $("#ward");


        wardDropdown.empty();
        wardDropdown.append(`<option value="" data-id="">Chọn phường/xã</option>`);


        if (!selectedDistrictId) {
            return;
        }


        axios.get(`${wardHost}?district_id=${selectedDistrictId}`, {
            headers: {
                'Content-Type': 'application/json',
                'token': token,
            }
        })
            .then(response => {
                const wards = response.data.data;

                wards.forEach(ward => {
                    wardDropdown.append(`<option value="${ward.WardName}" data-id="${ward.WardID}">${ward.WardName}</option>`);
                });
            })
            .catch(error => {
                console.error('Error fetching GHN Wards:', error);
            });

        var selectedOption = document.getElementById("district").value;
        if (selectedOption === "0") {
            document.getElementById("address-create-2").innerText = '';
        } else {
            var selectedOptionId = document.getElementById("district").selectedOptions[0].getAttribute("data-id");

            document.getElementById("address-create-2").innerText = selectedOption;
        }
    }
</script>
</body>