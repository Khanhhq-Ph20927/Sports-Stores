<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" data-layout="vertical" data-topbar="light" data-sidebar="light"
      data-sidebar-size="lg" data-sidebar-image="none" data-preloader="disable" data-body-image="none">
<head th:replace="admin/fragments/head::head">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.1.0/remixicon.css"
          integrity="sha512-dUOcWaHA4sUKJgO7lxAQ0ugZiWjiDraYNeNJeRKGOIpEq4vroj1DpKcS3jP0K4Js4v6bXk31AAxAxaYt3Oi9xw=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
</head>
<body>
<!-- Begin page -->
<div id="layout-wrapper">
    <div th:replace="admin/fragments/header::header"></div>
    <!-- ========== App Menu ========== -->
    <div th:replace="admin/fragments/sidebar::sidebar"></div>
    <!-- Left Sidebar End -->
    <!-- ============================================================== -->
    <!-- Start right Content here -->
    <!-- ============================================================== -->
    <div class="main-content">
        <div class="page-content">
            <div class="container-fluid">
                <!-- start page title -->
                <div class="row" style="padding: 10px 10px">
                    <div class="col-12">
                        <div class="page-title-box d-sm-flex align-items-center justify-content-between">
                            <h4 class="mb-sm-0">Danh Sách Sản Phẩm</h4>
                            <div class="page-title-right">
                                <ol class="breadcrumb m-0">
                                    <li class="breadcrumb-item"><a href="javascript: void(0);">Sản Phẩm</a></li>
                                    <li class="breadcrumb-item active">Danh Sách Sản Phẩm</li>
                                </ol>
                            </div>

                        </div>
                    </div>
                </div>
                <!-- end page title -->

                <div class="row" style="padding: 10px 10px">
                    <div class="col-lg-12">
                        <div class="card">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-3 d-flex justify-content-center align-items-center justify-content-sm-start">
                                        <a th:href="@{/api/admin/product/create_product}" class="btn btn-success"
                                           id="addproduct-btn"><i class="ri-add-line align-bottom me-1"></i> Thêm
                                            Sản
                                            Phẩm</a>
                                    </div>

                                    <div class="col-md-6 d-flex justify-content-center align-items-center justify-content-sm-between">
                                        <div class="row" style="padding-bottom: 10px">
                                            <div class="col-md-6">
                                                <label class="form-label">Danh Mục</label>
                                                <select class="form-select mb-3"
                                                        aria-label=".form-select-lg example"
                                                        id="filter-collections"
                                                        onchange="searchProduct()">
                                                    <option value="-1" selected>Tất Cả</option>
                                                    <option value="0">Quần</option>
                                                    <option value="1">Áo</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Trạng Thái</label>
                                                <select class="form-select mb-3"
                                                        aria-label=".form-select-lg example"
                                                        id="filter-status"
                                                        onchange="searchProduct()">
                                                    <option value="-1" selected>Tất Cả</option>
                                                    <option value="0">Chưa Mở Bán</option>
                                                    <option value="1">Đang Mở Bán</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-3 d-flex justify-content-center align-items-center justify-content-sm-end">
                                        <div class="search-box ms-2">
                                            <input type="text" class="form-control" autocomplete="off"
                                                   id="search-product-input" placeholder="Tìm Kiếm Sản Phẩm..."
                                                   onkeyup="searchProduct()">
                                            <i class="ri-search-line search-icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card p-2">
                            <div id="product-list" class="gridjs-border-none mb-4">
                                <table class="table table-striped">
                                    <thead class="table-light">
                                    <tr>
                                        <th scope="col">Id</th>
                                        <th scope="col">Tên</th>
                                        <th scope="col">Giá</th>
                                        <th scope="col">Danh Mục</th>
                                        <th scope="col">Trạng Thái</th>
                                        <th scope="col">Action</th>
                                    </tr>
                                    </thead>
                                    <tbody style="font-weight: normal" id="list_Product">
                                    </tbody>
                                </table>
                                <div class="row">
                                    <div class="col-lg-3"></div>
                                    <div class="col-lg-1"></div>
                                    <div class="col-lg-4">
                                        <nav aria-label="Page navigation example">
                                            <ul class="pagination justify-content-center" id="pagination">
                                            </ul>
                                        </nav>
                                    </div>
                                    <div class="col-lg-3"></div>
                                    <div class="col-lg-1"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- end card -->
            </div>
            <div class="modal" id="myModal" tabindex="-1">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Chi Tiết Sản Phẩm</h4>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form id="update-form" action="" class="my-form" method="post" th:object="${product}">
                                <div class="card">
                                    <div class="card-header">
                                        <div class="d-flex">
                                            <div class="flex-shrink-0 me-3">
                                                <div class="avatar-sm">
                                                    <div class="avatar-title rounded-circle bg-light text-primary fs-20">
                                                        <i class="bi bi-list-ul"></i>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="flex-grow-1">
                                                <h5 class="card-title mb-1">General Information</h5>
                                                <p class="text-muted mb-0">Fill all information below.</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div class="row ">
                                            <div class="col-lg-6">
                                                <div class="mb-3">
                                                    <label class="form-label" for="product-name-input">Tên Sản
                                                        Phẩm</label>
                                                    <input type="text" class="form-control" id="product-name-input"
                                                           placeholder="Enter product name" th:name="tenSP">
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="mb-3">
                                                    <label class="form-label">Nhà Cung Cấp</label>
                                                    <select class="form-select mb-3"
                                                            aria-label=".form-select-lg example"
                                                            id="product-brand-input" th:name="ncc">
                                                        <option selected value="-1">Open this select menu</option>
                                                        <option value="1">Nhà Cung Cấp A</option>
                                                        <option value="2">Nhà Cung Cấp B</option>
                                                        <option value="3">Nhà Cung Cấp C</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- end row -->

                                        <div class="row">
                                            <div class="col-lg-6">
                                                <div class="mb-3">
                                                    <label class="form-label">Danh Mục</label>
                                                    <select class="form-select mb-3"
                                                            aria-label=".form-select-lg example"
                                                            id="product-collections-input" th:name="danhMuc">
                                                        <option selected value="-1">Open this select menu</option>
                                                        <option value="0">Quần</option>
                                                        <option value="1">Áo</option>
                                                    </select>
                                                </div>
                                                <!--                                                    <div class="alert alert-danger" th:if="${errorCollections != null}" th:text="${errorCollections}"></div>-->
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="mb-3">
                                                    <label class="form-label">Trang Thái</label>
                                                    <div class="form-check mb-3">
                                                        <input class="form-check-input" type="radio"
                                                               id="radioStatus1"
                                                               value="0" th:name="trangThai">
                                                        <label class="form-check-label" for="radioStatus1">
                                                            Chưa Mở Bán
                                                        </label>
                                                        <br>
                                                        <input class="form-check-input" type="radio"
                                                               id="radioStatus2"
                                                               value="1" th:name="trangThai">
                                                        <label class="form-check-label" for="radioStatus2">
                                                            Đang Mở Bán
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!--end row-->

                                        <div class="row">
                                            <div class="col-lg-6">
                                                <div class="md-3">
                                                    <label class="form-label">Thương Hiệu</label>
                                                    <select class="form-select mb-3"
                                                            aria-label=".form-select-lg example"
                                                            id="product-provider-input" th:name="thieu">
                                                        <option selected value="-1">Open this select menu</option>
                                                        <option value="1">Local Brand 1</option>
                                                        <option value="2">Local Brand 2</option>
                                                        <option value="3">Local Brand 3</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="mb-3">
                                                    <label class="form-label" for="product-price-input">Giá</label>
                                                    <div class="input-group has-validation mb-3">
                                                        <span class="input-group-text"
                                                              id="product-price-addon">VND</span>
                                                        <input type="text" class="form-control"
                                                               id="product-price-input"
                                                               placeholder="Enter price" aria-label="Price"
                                                               aria-describedby="product-price-addon"
                                                               th:name="donGia"
                                                               required>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- end col -->
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                            Đóng
                                        </button>
                                        <button type="button" class="btn btn-primary" onclick="showConfirmPopup()">
                                            Lưu
                                        </button>
                                    </div>
                                    <!-- end row -->
                                </div>
                            </form>
                        </div>
                        <!-- end col -->
                    </div>
                    <!-- end row -->
                </div>
            </div>
            <!--end modal-->
            <div class="modal" id="myModalTable" tabindex="-1">
                <div class="modal-body">

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        Đóng
                    </button>
                    <button type="button" class="btn btn-primary" onclick="showConfirmPopup()">
                        Lưu
                    </button>
                </div>
            </div>
            <!-- end col -->
        </div>
        <!-- end row -->
    </div>
</div>
<div class="modal" id="myModalView" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Thêm Sản Phẩm Chi Tiết</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal"
                        aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="save_product_detail" action="" class="my-form" method="post">
                    <div class="card">
                        <div class="card-header">
                            <div class="d-flex">
                                <div class="flex-shrink-0 me-3">
                                    <div class="avatar-sm">
                                        <div class="avatar-title rounded-circle bg-light text-primary fs-20">
                                            <i class="bi bi-list-ul"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex-grow-1">
                                    <h5 class="card-title mb-1">General Information</h5>
                                    <p class="text-muted mb-0">Fill all information below.</p>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="row ">
                                <div class="col-lg-6">
                                    <div class="mb-3">
                                        <h5 class="fs-15 mb-3">Tên Sản Phẩm</h5>
                                        <input type="text" class="form-control" id="product-name-input"
                                               placeholder="Enter product name" disabled>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="mb-3">
                                        <div class="col-xl-6">
                                            <div class="color-picker">
                                                <label class="form-label">Màu Sắc</label>
                                                <ul class="clothe-colors list-unstyled hstack gap-2 mb-0 flex-wrap">
                                                    <li data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                        data-bs-placement="top"
                                                        data-bs-original-title="Xanh Lục Bảo">
                                                        <input type="checkbox" value="5" id="color-1"
                                                               name="mauSac">
                                                        <label class="avatar-xs btn btn-success p-0 d-flex align-items-center justify-content-center rounded-circle color-label"
                                                               for="color-1"></label>
                                                    </li>
                                                    <li data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                        data-bs-placement="top"
                                                        data-bs-original-title="Xám">
                                                        <input type="checkbox" value="4" id="color-2"
                                                               name="mauSac">
                                                        <label class="avatar-xs btn btn-info p-0 d-flex align-items-center justify-content-center rounded-circle color-label"
                                                               for="color-2"
                                                               style="background-color: rgb(169,169,169); border: none;"></label>
                                                    </li>
                                                    <li data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                        data-bs-placement="top"
                                                        data-bs-original-title="Vàng">
                                                        <input type="checkbox" value="8" id="color-3"
                                                               name="mauSac">
                                                        <label class="avatar-xs btn btn-warning p-0 d-flex align-items-center justify-content-center rounded-circle color-label"
                                                               for="color-3"></label>
                                                    </li>
                                                    <li data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                        data-bs-placement="top" data-bs-original-title="Đỏ">
                                                        <input type="checkbox" value="3" id="color-4"
                                                               name="mauSac">
                                                        <label class="avatar-xs btn btn-danger p-0 d-flex align-items-center justify-content-center rounded-circle color-label"
                                                               for="color-4"></label>
                                                    </li>
                                                    <li data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                        data-bs-placement="top"
                                                        data-bs-original-title="Xanh Da Trời">
                                                        <input type="checkbox" value="7" id="color-5"
                                                               name="mauSac">
                                                        <label class="avatar-xs btn btn-primary p-0 d-flex align-items-center justify-content-center rounded-circle color-label"
                                                               for="color-5"></label>
                                                    </li>
                                                    <li data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                        data-bs-placement="top"
                                                        data-bs-original-title="Tím Xanh">
                                                        <input type="checkbox" value="6"
                                                               id="color-6" name="mauSac">
                                                        <label class="avatar-xs btn btn-secondary p-0 d-flex align-items-center justify-content-center rounded-circle color-label"
                                                               for="color-6"
                                                               data-bs-original-title="Tím Xanh"></label>
                                                    </li>
                                                    <li data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                        data-bs-placement="top"
                                                        data-bs-original-title="Đen">
                                                        <input type="checkbox" value="1" id="color-7"
                                                               name="mauSac">
                                                        <label class="avatar-xs btn btn-dark p-0 d-flex align-items-center justify-content-center rounded-circle color-label"
                                                               for="color-7"></label>
                                                    </li>
                                                    <li data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                        data-bs-placement="top"
                                                        data-bs-original-title="Trắng">
                                                        <input type="checkbox" value="2" id="color-8"
                                                               name="mauSac">
                                                        <label class="avatar-xs btn btn-light p-0 d-flex align-items-center justify-content-center rounded-circle color-label"
                                                               for="color-8"></label>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- end row -->

                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="mb-3">
                                        <h5 class="fs-15 mb-3">Số Lượng</h5>
                                        <input type="text" class="form-control"
                                               id="product-count-input"
                                               placeholder="Enter count" aria-label="Count"
                                               aria-describedby="product-count-addon"
                                               required th:name="soLuong">
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="mb-3">
                                        <div class="col-xl-6">
                                            <div class="mt-4">
                                                <h5 class="fs-15 mb-3">Size :</h5>
                                                <div class="d-flex flex-wrap gap-2 size-picker">
                                                    <div data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                         data-bs-placement="top">
                                                        <input type="checkbox" class="btn-check"
                                                               id="productsize-radio1" value="s"
                                                               name="size">
                                                        <label class="btn btn-soft-primary avatar-xs rounded-circle p-0 d-flex justify-content-center align-items-center"
                                                               for="productsize-radio1">S</label>
                                                    </div>

                                                    <div data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                         data-bs-placement="top">
                                                        <input type="checkbox" class="btn-check"
                                                               id="productsize-radio2" value="m"
                                                               name="size">
                                                        <label class="btn btn-soft-primary avatar-xs rounded-circle p-0 d-flex justify-content-center align-items-center"
                                                               for="productsize-radio2">M</label>
                                                    </div>
                                                    <div data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                         data-bs-placement="top">
                                                        <input type="checkbox" class="btn-check"
                                                               id="productsize-radio3" value="l"
                                                               name="size">
                                                        <label class="btn btn-soft-primary avatar-xs rounded-circle p-0 d-flex justify-content-center align-items-center"
                                                               for="productsize-radio3">L</label>
                                                    </div>

                                                    <div data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                         data-bs-placement="top">
                                                        <input type="checkbox" class="btn-check"
                                                               id="productsize-radio4" value="xl"
                                                               name="size">
                                                        <label class="btn btn-soft-primary avatar-xs rounded-circle p-0 d-flex justify-content-center align-items-center"
                                                               for="productsize-radio4">XL</label>
                                                    </div>
                                                    <div data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                         data-bs-placement="top">
                                                        <input type="checkbox" class="btn-check"
                                                               id="productsize-radio5" value="xxl"
                                                               name="size">
                                                        <label class="btn btn-soft-primary avatar-xs rounded-circle p-0 d-flex justify-content-center align-items-center"
                                                               for="productsize-radio5">XXL</label>
                                                    </div>

                                                    <div data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                         data-bs-placement="top">
                                                        <input type="checkbox" class="btn-check"
                                                               id="productsize-radio6" value="2xl"
                                                               name="size">
                                                        <label class="btn btn-soft-primary avatar-xs rounded-circle p-0 d-flex justify-content-center align-items-center"
                                                               for="productsize-radio6">2XL</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--end row-->

                            <!-- end col -->
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                Đóng
                            </button>
                            <button type="button" class="btn btn-primary" onclick="showConfirmPopup()">
                                Lưu
                            </button>
                        </div>
                        <!-- end row -->
                    </div>
                </form>
            </div>
            <!-- end col -->
        </div>
        <!-- end row -->
    </div>
</div>
<div class="modal" id="myModalEdit" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Sản Phẩm Chi Tiết</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal"
                        aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="edit_product_detail" action="" class="my-form" method="post">
                    <div class="card">
                        <div class="card-header">
                            <div class="d-flex">
                                <div class="flex-shrink-0 me-3">
                                    <div class="avatar-sm">
                                        <div class="avatar-title rounded-circle bg-light text-primary fs-20">
                                            <i class="bi bi-list-ul"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex-grow-1">
                                    <h5 class="card-title mb-1">General Information</h5>
                                    <p class="text-muted mb-0">Fill all information below.</p>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="row ">
                                <div class="col-lg-6">
                                    <div class="mb-3">
                                        <h5 class="fs-15 mb-3">Tên Sản Phẩm</h5>
                                        <input type="text" class="form-control" id="product-name-input-edit"
                                               placeholder="Enter product name" disabled>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="mb-3">
                                        <div class="col-xl-6">
                                            <div class="color-picker">
                                                <label class="form-label">Màu Sắc</label>
                                                <ul class="clothe-colors list-unstyled hstack gap-2 mb-0 flex-wrap">
                                                    <li data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                        data-bs-placement="top"
                                                        data-bs-original-title="Xanh Lục Bảo">
                                                        <input type="radio" value="5" id="color-5-update"
                                                               name="ms">
                                                        <label class="avatar-xs btn btn-success p-0 d-flex align-items-center justify-content-center rounded-circle color-label"
                                                               for="color-5-update"></label>
                                                    </li>
                                                    <li data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                        data-bs-placement="top"
                                                        data-bs-original-title="Xám">
                                                        <input type="radio" value="4" id="color-4-update"
                                                               name="ms">
                                                        <label class="avatar-xs btn btn-info p-0 d-flex align-items-center justify-content-center rounded-circle color-label"
                                                               for="color-4-update"
                                                               style="background-color: rgb(169,169,169); border: none;"></label>
                                                    </li>
                                                    <li data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                        data-bs-placement="top"
                                                        data-bs-original-title="Vàng">
                                                        <input type="radio" value="8" id="color-8-update"
                                                               name="ms">
                                                        <label class="avatar-xs btn btn-warning p-0 d-flex align-items-center justify-content-center rounded-circle color-label"
                                                               for="color-8-update"></label>
                                                    </li>
                                                    <li data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                        data-bs-placement="top" data-bs-original-title="Đỏ">
                                                        <input type="radio" value="3" id="color-3-update"
                                                               name="ms">
                                                        <label class="avatar-xs btn btn-danger p-0 d-flex align-items-center justify-content-center rounded-circle color-label"
                                                               for="color-3-update"></label>
                                                    </li>
                                                    <li data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                        data-bs-placement="top"
                                                        data-bs-original-title="Xanh Da Trời">
                                                        <input type="radio" value="7" id="color-7-update"
                                                               name="ms">
                                                        <label class="avatar-xs btn btn-primary p-0 d-flex align-items-center justify-content-center rounded-circle color-label"
                                                               for="color-7-update"></label>
                                                    </li>
                                                    <li data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                        data-bs-placement="top"
                                                        data-bs-original-title="Tím Xanh">
                                                        <input type="radio" value="6"
                                                               id="color-6-update" name="ms">
                                                        <label class="avatar-xs btn btn-secondary p-0 d-flex align-items-center justify-content-center rounded-circle color-label"
                                                               for="color-6-update"
                                                               data-bs-original-title="Tím Xanh"></label>
                                                    </li>
                                                    <li data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                        data-bs-placement="top"
                                                        data-bs-original-title="Đen">
                                                        <input type="radio" value="1" id="color-1-update"
                                                               name="ms">
                                                        <label class="avatar-xs btn btn-dark p-0 d-flex align-items-center justify-content-center rounded-circle color-label"
                                                               for="color-1-update"></label>
                                                    </li>
                                                    <li data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                        data-bs-placement="top"
                                                        data-bs-original-title="Trắng">
                                                        <input type="radio" value="2" id="color-2-update"
                                                               name="ms">
                                                        <label class="avatar-xs btn btn-light p-0 d-flex align-items-center justify-content-center rounded-circle color-label"
                                                               for="color-2-update"></label>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- end row -->

                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="mb-3">
                                        <h5 class="fs-15 mb-3">Số Lượng</h5>
                                        <input type="text" class="form-control"
                                               id="productdetail-count-input-edit"
                                               placeholder="Enter Count" aria-label="Count"
                                               aria-describedby="product-count-addon"
                                               required th:name="soLuong">
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="mb-3">
                                        <div class="col-xl-6">
                                            <div class="mt-4">
                                                <h5 class="fs-15 mb-3">Size :</h5>
                                                <div class="d-flex flex-wrap gap-2 size-picker">
                                                    <div data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                         data-bs-placement="top">
                                                        <input type="radio" class="btn-check"
                                                               id="productsize-radio-update-s" value="s"
                                                               name="size-update">
                                                        <label class="btn btn-soft-primary avatar-xs rounded-circle p-0 d-flex justify-content-center align-items-center"
                                                               for="productsize-radio-update-s">S</label>
                                                    </div>

                                                    <div data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                         data-bs-placement="top">
                                                        <input type="radio" class="btn-check"
                                                               id="productsize-radio-update-m" value="m"
                                                               name="size-update">
                                                        <label class="btn btn-soft-primary avatar-xs rounded-circle p-0 d-flex justify-content-center align-items-center"
                                                               for="productsize-radio-update-m">M</label>
                                                    </div>
                                                    <div data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                         data-bs-placement="top">
                                                        <input type="radio" class="btn-check"
                                                               id="productsize-radio-update-l" value="l"
                                                               name="size-update">
                                                        <label class="btn btn-soft-primary avatar-xs rounded-circle p-0 d-flex justify-content-center align-items-center"
                                                               for="productsize-radio-update-l">L</label>
                                                    </div>

                                                    <div data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                         data-bs-placement="top">
                                                        <input type="radio" class="btn-check"
                                                               id="productsize-radio-update-xl" value="xl"
                                                               name="size-update">
                                                        <label class="btn btn-soft-primary avatar-xs rounded-circle p-0 d-flex justify-content-center align-items-center"
                                                               for="productsize-radio-update-xl">XL</label>
                                                    </div>

                                                    <div data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                         data-bs-placement="top">
                                                        <input type="radio" class="btn-check"
                                                               id="productsize-radio-update-xxl" value="xxl"
                                                               name="size-update">
                                                        <label class="btn btn-soft-primary avatar-xs rounded-circle p-0 d-flex justify-content-center align-items-center"
                                                               for="productsize-radio-update-xxl">XXL</label>
                                                    </div>

                                                    <div data-bs-toggle="tooltip" data-bs-trigger="hover"
                                                         data-bs-placement="top">
                                                        <input type="radio" class="btn-check"
                                                               id="productsize-update-2xl" value="2xl"
                                                               name="size-update">
                                                        <label class="btn btn-soft-primary avatar-xs rounded-circle p-0 d-flex justify-content-center align-items-center"
                                                               for="productsize-update-2xl">2XL</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--end row-->

                            <!-- end col -->
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                Đóng
                            </button>
                            <button type="button" class="btn btn-primary"
                                    onclick="showConfirmPopupUpdate()">
                                Lưu
                            </button>
                        </div>
                        <!-- end row -->
                    </div>
                </form>
            </div>
            <!-- end col -->
        </div>
        <!-- end row -->
    </div>
</div>
<!-- end modal -->
</div>
</div>
</div>
<!-- End Page-content -->
</div>
<!-- end main content-->
</div>
<!-- END layout-wrapper -->
<div th:replace="admin/fragments/chat::chat"></div>
<div th:replace="admin/fragments/themeSettings::themeSettings"></div>
<div th:replace="admin/fragments/script::script"></div>
</body>
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script th:inline="javascript">

    // lưu page index đang select của table
    var page;

    window.onload = function () {
        loadPage(0);
    }

    function detailProduct(productId) {
        fetch('/api/admin/product/detail/' + productId, {
            method: 'GET'
        }).then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        }).then(data => {
            console.log(data);
            document.getElementById('product-name-input').value = data.tenSP;
            document.getElementById('product-brand-input').value = data.ncc.id;
            document.getElementById('product-collections-input').value = data.danhMuc;
            document.getElementById('product-provider-input').value = data.thieu.id;
            document.getElementById('product-price-input').value = data.donGia;
            document.getElementById('update-form').action = '/api/admin/product/update/' + productId;
            if (data.trangThai === 0) {
                document.getElementById('radioStatus1').checked = true;
            } else if (data.trangThai === 1) {
                document.getElementById('radioStatus2').checked = true;
            }

            $('#myModal').modal('show');
        })
            .catch(error => console.error('Error:', error));
    }

    function showConfirmPopup() {
        swal.fire({
            title: "Do you want to save the changes?",
            showDenyButton: true,
            showCancelButton: true,
            confirmButtonText: "Save",
            denyButtonText: `Don't save`
        }).then((result) => {
            if (result.isConfirmed) {
                document.getElementById('update-form').submit();
                loadPage(0);
            }
            // else if (result.isDenied) {
            //     // swal.fire("Changes are not saved", "", "info");
            // }
        });
    }

    async function loadPage(pageNumber) {
        var url = "/api/admin/product/page/search/" + pageNumber + "/" + "null";
        const response = await fetch(url, {
            method: 'GET'
        });
        page = pageNumber;
        var result = await response.json();
        console.log(result);
        var list = result.content;
        var totalPage = result.totalPages;
        var number = result.number;
        var main = '';
        for (i = 0; i < list.length; i++) {
            var trangThaiBadge = (list[i].trangThai == 0) ? '<div class="form-check form-switch" \>\n' +
                '<input class="form-check-input form-control-icon" id="input-status-' + list[i].id + '" type="checkbox" onchange="updateStatus(' + list[i].id + ', 1)" />\n' +
                '</div>' : '<div class="form-check form-switch" \>\n' +
                '<input class="form-check-input form-control-icon" id="input-status-' + list[i].id + '" type="checkbox" onchange="updateStatus(' + list[i].id + ', 0)" checked/>\n' +
                '</div>';
            main += `<tr >
                            <td scope="row">${list[i].maSP}</td>
                            <td scope="row">${list[i].tenSP}</td>
                            <td scope="row">${formatMoney(list[i].donGia)}</td>
                            <td scope="row">${list[i].danhMuc == 0 ? 'Quần' : 'Áo'}</td>
                            <td>${trangThaiBadge}</td>
                            <td>
                                <div class="hstack gap-3 flex-warp">
                                <div onclick="detailProduct(${list[i].id})"
                                     class="link-info fs-15"><i class="ri-edit-2-line"></i></div>
                                <div onclick="viewProductDetail()"><i class="ri-eye-2-line"></i></div>
                                 </div>
                            </td>
                     </tr>`
        }
        document.getElementById("list_Product").innerHTML = main;
        var currentPage = `
            <li class="page-item">
                    <button class="page-link" aria-label="Previous" onclick="loadPage(${number - 1 === 0 ? totalPage : number - 1})"><span aria-hidden="true">&laquo;</span></button>
            </li>
            <li class="page-item">
                    <button class="page-link" onclick="loadPage(0)">1</button>
            </li>
            <li class="page-item">
                    <button class="page-link" onclick="loadPage(1)">2</button>
            </li>
            <li class="page-item">
                    <button class="page-link" onclick="loadPage(2)">3</button>
            </li>
            <li class="page-item">
                    <button class="page-link" aria-label="Next" onclick="loadPage(${number + 1 === totalPage ? 0 : number + 1})">
                       <span aria-hidden="true">&raquo;</span>
                     </button>
            </li>
        `;
        document.getElementById("pagination").innerHTML = currentPage;
    }

    async function viewProductDetail() {

    }

    function formatMoney(money) {
        const VND = new Intl.NumberFormat('vi-VN', {
            style: 'currency',
            currency: 'VND',
        });
        return VND.format(money);
    }

    async function searchProduct(pageNumber) {
        var keyword = document.getElementById("search-product-input").value.trim().toLowerCase();
        var status = document.getElementById("filter-status").value;
        var collection = document.getElementById("filter-collections").value;
        var url;
        console.log(status);
        console.log(collection);

        pageNumber === undefined ? page = 0 : page = pageNumber;

        if (pageNumber === undefined && keyword === '' && status === "-1" && collection === "-1") {
            loadPage(0);
        }// if start search with keyword
        else if (pageNumber === undefined && keyword !== '' && status === "-1" && collection === "-1") {
            url = "/api/admin/product/page/search/" + 0 + "/" + keyword;
            console.log(url);
            console.log(1);
        }// search and paging
        else if (pageNumber !== undefined && keyword !== '' && status === "-1" && collection === "-1") {
            url = "/api/admin/product/page/search/" + pageNumber + "/" + keyword + "/" + -1 + "/" - 1;
            console.log(url);
            console.log(2);
        }// filter
        else if (pageNumber === undefined && keyword === '' && (status !== "-1" || collection !== "-1")) {
            url = "/api/admin/product/page/" + "null" + "/" + 0 + "/" + status + "/" + collection;
            console.log(url);
            console.log(3);
        }// filter and search
        else if (pageNumber === undefined && keyword !== '' && (status !== "-1" || collection !== "-1")) {
            url = "/api/admin/product/page/" + keyword + "/" + 0 + "/" + status + "/" + collection;
            console.log(url);
            console.log(4);
        }// filter and paging
        else if (pageNumber !== undefined && keyword === '' && (status !== "-1" || collection !== "-1")) {
            url = "/api/admin/product/page/" + "null" + "/" + pageNumber + "/" + status + "/" + collection;
            console.log(url);
            console.log(5);
        }// filter, search and paging
        else if (pageNumber !== undefined && (status !== "-1" || collection !== "-1") && keyword !== '') {
            url = "/api/admin/product/page/" + keyword + "/" + pageNumber + "/" + status + "/" + collection;
            console.log(url);
            console.log(6);
        }
        const response = await fetch(url, {
            method: 'GET'
        });
        var result = await response.json();
        console.log(result);
        var list = result.content;
        var totalPage = result.totalPages;
        var number = result.number;
        var main = '';
        for (i = 0; i < list.length; i++) {
            var trangThaiBadge = (list[i].trangThai == 0) ? '<div class="form-check form-switch" \>\n' +
                '<input class="form-check-input form-control-icon" id="input-status-' + list[i].id + '" type="checkbox" onchange="updateStatus(' + list[i].id + ', 1)" />\n' +
                '</div>' : '<div class="form-check form-switch" \>\n' +
                '<input class="form-check-input form-control-icon" id="input-status-' + list[i].id + '" type="checkbox" onchange="updateStatus(' + list[i].id + ', 0)" checked/>\n' +
                '</div>';
            main += `<tr >
                            <td scope="row">${list[i].maSP}</td>
                            <td scope="row">${list[i].tenSP}</td>
                            <td scope="row">${formatMoney(list[i].donGia)}</td>
                            <td scope="row">${list[i].danhMuc == 0 ? 'Quần' : 'Áo'}</td>
                            <td>${trangThaiBadge}</td>
                            <td>
                                <div class="hstack gap-3 flex-warp">
                                <div onclick="detailProduct(${list[i].id})"
                                     class="link-info fs-15"><i class="ri-edit-2-line"></i></div>
                                 </div>
                            </td>
                     </tr>`
        }
        document.getElementById("list_Product").innerHTML = main;
        var currentPage = `
            <li class="page-item">
                    <button class="page-link" onclick="searchProduct(0)" aria-label="First">First</button>
            </li>
            <li class="page-item">
                    <button class="page-link" aria-label="Previous" onclick="searchProduct(${number - 1 < 0 ? totalPage - 1 : number - 1})"><span aria-hidden="true">&laquo;</span></button>
            </li>
            <li class="page-item">
                    <button class="page-link">${number + 1}</button>
            </li>
            </li>
            <li class="page-item">
                    <button class="page-link" aria-label="Next" onclick="searchProduct(${number + 1 === totalPage ? 0 : number + 1})">
                       <span aria-hidden="true">&raquo;</span>
                     </button>
            </li>
            <li class="page-item">
                    <button class="page-link" onclick="searchProduct(${totalPage - 1})" aria-label="Last">Last</button>
            </li>
        `;
        document.getElementById("pagination").innerHTML = currentPage;
    }

    function updateStatus(idProduct, status) {
        swal.fire({
            title: "Bạn Có Muốn Thay Đổi Trạng Thái?",
            showDenyButton: true,
            showCancelButton: true,
            confirmButtonText: "Lưu Thay Đổi",
            denyButtonText: `Quay Về`
        }).then((result) => {
            if (result.isConfirmed) {
                fetch('/api/admin/product/update_status/' + idProduct + '/' + status, {
                    method: 'GET'
                }).then(response => {
                    return response.json();
                }).then(data => {
                    console.log(data)
                }).catch(error => console.log('Error:', error));
            } else {
                // If the user has not confirmed, then check the status of the checkbox and return it to its original state.
                if (status === 1) {
                    document.getElementById("input-status-" + idProduct).checked = false;
                } else {
                    document.getElementById("input-status-" + idProduct).checked = true;
                }
            }
        });
    }
</script>
<script th:if="${updateSuccess == true}">
    swal.fire("Changes have been Saved!", "", "success");
</script>
<script th:if="${updateFailure == false}">
    swal.fire("Changes have not been saved!", "", "error");
</script>
</html>